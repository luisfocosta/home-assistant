##########################################
## Hue Lighting Scenes                  ##
##########################################
kitchen_tv_lights_hue_scene:
  alias: Hue Scene TV Lights (Kitchen)
  sequence:
    - service: hue.hue_activate_scene
      data:
        group_name: "Kitchen"
        scene_name: "Evening TV"

kitchen_evening_lights_hue_scene:
  alias: Hue Scene Evening Lights (Kitchen)
  sequence:
    - service: hue.hue_activate_scene
      data:
        group_name: "Kitchen"
        scene_name: "Evening Lights"

kitchen_nightlight_hue_scene:
  alias: Hue Scene Nightlight (Kitchen)
  sequence:
    - service: hue.hue_activate_scene
      data:
        group_name: "Kitchen"
        scene_name: "Nightlights"

living_room_tv_lights_hue_scene:
  alias: Hue Scene TV Lights (Living Room)
  sequence:
    - service: hue.hue_activate_scene
      data:
        group_name: "Living Room"
        scene_name: "TV Lighting"

living_room_evening_lights_hue_scene:
  alias: Hue Scene Evening Lights (Living Room)
  sequence:
    - service: hue.hue_activate_scene
      data:
        group_name: "Living Room"
        scene_name: "Normal Lighting"

living_room_nightlights_lights_hue_scene:
  alias: Hue Scene Nightlight (Living Room)
  sequence:
    - service: hue.hue_activate_scene
      data:
        group_name: "Living Room"
        scene_name: "Nightlight"

##########################################
## Theater Room AV Resets               ##
##########################################
theater_room_soundbar_reset:
  alias: Theater Room Sound Bar Reset
  sequence:
  - service: remote.turn_on
    entity_id: remote.theater_room_harmony_hub
    data:
      activity: "27555534"

theater_room_harmony_hub_off:
  sequence:
  - service: remote.turn_off
    entity_id: remote.theater_room_harmony_hub
    
##########################################
## TTS Scripts                          ##
##########################################
#TTS Script		
audio_notify:
  alias: 'Alexa TTS Script'
  sequence: 
    - service: media_player.alexa_tts
      data_template:       
        entity_id: >
          {% if (mplayer == "all") %}
            media_player.bedroom_spot,media_player.kitchen,media_player.office,media_player.living_room_echo,media_player.garage,media_player.media_room
          {% elif (mplayer == "downstairs_media_players") %}
            media_player.kitchen,media_player.office,media_player.living_room_echo,media_player.garage
          {% elif (mplayer == "upstairs_media_players") %}
            media_player.bedroom_spot,media_player.media_room
          {% elif (mplayer == "main") %}
            media_player.bedroom_spot,media_player.media_room,media_player.kitchen,media_player.garage
          {% else %}
            media_player.{{ mplayer }}
          {% endif %} 
        message: "{{ tts_msg }}"
        
alexa_notify:
  alias: 'Alexa Timer Notification Script'
  sequence: 
    - service: media_player.alexa_tts
      data_template:       
        entity_id: media_player.bedroom_spot,media_player.kitchen,media_player.office,media_player.living_room_echo,media_player.garage,media_player.media_room
        message: "An Alexa Timer has gone off"

notificationalarm:
  alias: 'Notify that sensors changed when nobody is home'
  sequence:
    - service: media_player.sonos_snapshot
      entity_id: media_player.living_room
    - service: media_player.volume_set
      entity_id: media_player.living_room
      data:
        volume_level: .9
    - service: media_player.play_media
      entity_id: media_player.living_room
      data:
        media_content_id: 'https://dl.dropboxusercontent.com/u/7457/HASS/Burglar_Alarm.mp3'
        media_content_type: 'music'
    - delay: '00:01:28'
    - service: media_player.sonos_restore
      entity_id: media_player.living_room 

##########################################
## Garage Door Toggle                   ##
##########################################
toggle_cover:
  alias: 'Garage Door Button'
  sequence:
    - service: homeassistant.turn_on
      entity_id: input_boolean.garage_changed_with_ha
    - service_template: >
        {% if is_state('cover.garage_door_opener', 'open') %}
          cover.close_cover
        {% else %}
          cover.open_cover
        {% endif %}
      entity_id: cover.garage_door_opener

##########################################
## Ecobee Mode Settings                 ##
##########################################
ecobee_resume_mode:
  alias: "Resume Ecobee mode"
  sequence:
    - service: climate.ecobee_resume_program
      entity_id:
       - climate.downstairs
       - climate.upstairs

ecobee_home_mode:
  alias: "Ecobee Home Mode"
  sequence:
    - service: climate.set_hold_mode
      entity_id:
       - climate.downstairs
       - climate.upstairs
      data:
        hold_mode: 'home'

ecobee_away_mode:
  alias: "Ecobee Away Mode"
  sequence:
    - service: climate.set_hold_mode
      entity_id:
       - climate.downstairs
       - climate.upstairs
      data:
        hold_mode: 'away'

ecobee_sleep_mode:
  alias: "Ecobee Sleep mode"
  sequence:
    - condition: template
      value_template: "{{ states.climate.downstairs.attributes.climate_mode != 'Sleep' }}"
    - service: climate.set_hold_mode
      entity_id:
       - climate.downstairs
       - climate.upstairs
      data:
        hold_mode: 'sleep'

ecobee_worker_mode:
  alias: "Ecobee Worker Mode"
  sequence:
    - service: climate.set_hold_mode
      entity_id:
       - climate.downstairs
       - climate.upstairs
      data:
        hold_mode: 'smart1'

##########################################
## Security Camera Photo Capture        ##
##########################################
capture_driveway1_camera:
  alias: Capture Still Image from Driveway 1 Camera
  sequence:
    - service: switch.turn_on
      entity_id: switch.save_driveway1
    - service: switch.turn_off
      entity_id: switch.save_driveway1

capture_driveway2_camera:
  alias: Capture Still Image from Driveway 2 Camera
  sequence:
    - service: switch.turn_on
      entity_id: switch.save_driveway2
    - service: switch.turn_off
      entity_id: switch.save_driveway2

capture_backgate_camera:
  alias: Capture Still Image from Backgate Camera
  sequence:
    - service: switch.turn_on
      entity_id: switch.save_backgate
    - service: switch.turn_off
      entity_id: switch.save_backgate

capture_sideyard_camera:
  alias: Capture Still Image from Sideyard Camera
  sequence:
    - service: switch.turn_on
      entity_id: switch.save_sideyard
    - service: switch.turn_off
      entity_id: switch.save_sideyard

capture_frontdoor_camera:
  alias: Capture Still Image from Frontdoor Camera
  sequence:
    - service: switch.turn_on
      entity_id: switch.save_frontdoor
    - service: switch.turn_off
      entity_id: switch.save_frontdoor

gif_picture_script:
  alias: GIF Picture
  sequence:
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor1.png
    service: camera.snapshot
  - delay: '00:00:01'
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor2.png
    service: camera.snapshot
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor3.png
    service: camera.snapshot
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor4.png
    service: camera.snapshot
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor5.png
    service: camera.snapshot
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor5.png
    service: camera.snapshot
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor6.png
    service: camera.snapshot
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor7.png
    service: camera.snapshot
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor8.png
    service: camera.snapshot
  - data:
      entity_id: camera.front_door
      filename: /home/homeassistant/.homeassistant/www/tmp/frontdoor9.png
    service: camera.snapshot
  - service: shell_command.snapshot_frontdoor_gif
  - delay: '00:00:15'
  - service: notify.pushbullet_notifications
    data:
      message: "{{ as_timestamp (now()) | timestamp_custom('%I:%M %p') }} on {{ now().strftime('%d %b %Y') }}" 
      target:
      - !secret pauls_secret_email
      - !secret tracys_secret_email      
      title: Driveway Crossing
      data:
        file: /home/homeassistant/.homeassistant/www/tmp/frontdoor.gif
